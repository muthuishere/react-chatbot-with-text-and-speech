{"version":3,"sources":["../../src/config.js","../../src/message/messageService.js","../../src/message/components/InputPanel.js","../../src/message/shared/formatter.js","../../src/message/components/MessagePanels.js","../../src/message/MessageContainer.js","../../src/texttospeech/textToSpeechService.js","../../src/texttospeech/textToSpeechDispatcher.js","../../src/texttospeech/TextToSpeech.js","../../src/texttospeech/textToSpeechController.js","../../src/speechrecognition/speechRecognitionDispatcher.js","../../src/speechrecognition/speechRecognitionService.js","../../src/speechrecognition/speechRecognitionController.js","../../src/speechrecognition/SpeechRecognizer.js","../../src/SpeechRecognizerAndTTSPanel.js","../../src/index.js","App.js","index.js"],"names":["AppInitialState","messages","lastreceivedmessage","texttospeech","enabled","status","speaking","speechrecognition","pauseRecognizing","transcript","error","restartSpeech","config","botImageUrl","speechRecognition","textToSpeech","inputBoxPlaceholder","createGlobalState","useGlobalState","getGlobalState","setGlobalState","getGlobalSpeakRecognitionState","addMessageWithType","message","typeOfMessage","prev","time","Date","type","addIncomingMessage","SpokenInputPanel","props","useEffect","onChangeTranscript","onSendData","onClearInput","React","InputPanel","onResponse","useState","inputValue","setInputValue","inputPlaceHolder","setInputPlaceHolder","onSendClicked","sendMessageForProcessing","msg","length","console","log","className","styles","sendInput","aria-label","placeholder","value","onChange","evt","event","preventDefault","currentTarget","onKeyDown","key","handleKeyDown","msg_send_btn","onClick","aria-hidden","txt","getStartOfDay","input","dateToBeCompared","getTime","setHours","setMinutes","setSeconds","setMilliseconds","formattedDateTime","compDate","toLocaleTimeString","hour12","hour","minute","months","Array","days","today","diff","getDay","getDate","getMonth","getFullYear","getDisplayDate","IncomingMessage","src","imageUrl","botImageClass","alt","received_withd_msg","time_date","OutGoingMessage","outgoing_msg","sent_msg","MessageContainer","bottomRef","useRef","current","scrollIntoView","behavior","msg_history","map","index","ref","TextToSpeechService","this","utterance","onEnd","onStart","onError","getSpeechSynthesis","window","speechSynthesis","setTextToSpeechEnabled","updateTextToSpeechStatus","setSpeaking","isSpeaking","TextToSpeechDisabledPanel","_","setLastReceivedMessage","title","TextToSpeechEnabledPanel","handler","textToSpeechService","s","speak","cancel","stop","TextToSpeech","enableSpeech","setEnableSpeech","updateSpeechRecognition","inp","updateSpeechRecognitionStatus","SpeechRecognitionService","paused","stopped","onNoMatch","onSpeechStart","onSpeechEnd","onResult","prototype","SpeechSynthesisUtterance","getSpeechSynthesisUtterance","addEventListener","_this","getVoices","voice","defaultSuffix","label","name","lang","start","recognition","webkitSpeechRecognition","onstart","bind","onend","onerror","validErrors","onnomatch","onspeechstart","onspeechend","onresult","results","continuous","interimResults","abort","pause","speechRecognitionService","startSpeechRecognition","data","stopSpeechRecognition","SpeechRecognizerEnabledPanel","canRestart","restart","setRestart","setTimeout","useRestartSpeechRecognizer","SpeechRecognizer","speechrecognitionEnabled","setSpeechRecognitionEnabled","SpeechRecognizerAndTTSPanel","canSpeechRecognize","setCanSpeechRecognize","canPauseRecognizing","useSpeechData","speechcontainer","ChatBotComponent","handleMessage","options","setConfig","textToSpeechOptions","setTextToSpeechOptions","speechrecognitionOptions","setSpeechrecognitionOptions","mergedOptions","formattedOptions","String","appcontainer","messageDiv","messageContainer","text","response","Promise","resolve","i","ChatBotWithDemo","defaultOptions","url","availableOptions","setOptions","formik","useFormik","initialValues","onSubmit","values","fetch","result","json","handleSubmit","Object","keys","htmlFor","id","handleChange","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ea585e7b.chunk.js","sourcesContent":["import { createGlobalState } from 'react-hooks-global-state'\n\nconst botImageUrl =\n  'data:image/png;base64,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'\nexport const AppInitialState = {\n  messages: [],\n  lastreceivedmessage: '',\n  texttospeech: {\n    enabled: false,\n    status: 'NONE',\n    speaking: false\n  },\n  speechrecognition: {\n    enabled: false,\n    pauseRecognizing: false,\n    status: 'NONE',\n    transcript: '',\n    error: null,\n    restartSpeech: false\n  },\n  config: {\n    botImageUrl: botImageUrl,\n    speechRecognition: false,\n    textToSpeech: false,\n    inputBoxPlaceholder: 'Type your message here'\n  }\n}\nexport const { useGlobalState, getGlobalState, setGlobalState } =\n  createGlobalState(AppInitialState)\n\nexport const getGlobalSpeakRecognitionState = () => {\n  return getGlobalState('speechrecognition')\n}\n","import { setGlobalState } from '../config'\n\nfunction addMessageWithType(message, typeOfMessage) {\n  setGlobalState('messages', (prev) => [\n    ...prev,\n    { message, time: new Date(), type: typeOfMessage }\n  ])\n}\n\nexport function addIncomingMessage(message) {\n  addMessageWithType(message, 'incoming')\n  setGlobalState('lastreceivedmessage', message)\n}\n\nexport function addOutgoingMessage(message) {\n  addMessageWithType(message, 'outgoing')\n}\n\nexport function resetMessages() {\n  setGlobalState('messages', [])\n}\n","import React, { useEffect, useState } from 'react'\nimport { useGlobalState } from '../../config'\nimport { addOutgoingMessage } from '../messageService'\nimport styles from '../../styles.module.css'\n\nexport function SpokenInputPanel(props) {\n  const [speechrecognition] = useGlobalState('speechrecognition')\n\n  useEffect(() => {\n    const { status, transcript } = speechrecognition\n\n    // console.log(`status: ${status} transcript: ${transcript} enabled: ${enabled}`);\n\n    props.onChangeTranscript(transcript)\n\n    if (status === 'SPEECH-COMPLETED') {\n      // addOutgoingMessage(transcript)\n      props.onSendData(transcript)\n      props.onClearInput()\n    }\n  }, [speechrecognition])\n\n  return <span />\n}\n\nexport function InputPanel({ onResponse }) {\n  const [inputValue, setInputValue] = useState('')\n  const [inputPlaceHolder, setInputPlaceHolder] = useState('')\n  const [speechrecognition] = useGlobalState('speechrecognition')\n  const [config] = useGlobalState('config')\n\n  useEffect(() => {\n    console.log('config', config)\n    console.log('config', config.inputBoxPlaceholder)\n    setInputPlaceHolder(config.inputBoxPlaceholder)\n  }, [config])\n\n  function onSendClicked() {\n    sendMessageForProcessing(inputValue)\n    setInputValue('')\n  }\n  function onDataReceivedAsSpeech(msg) {\n    sendMessageForProcessing(msg)\n    setInputValue('')\n  }\n  function sendMessageForProcessing(msg) {\n    if (msg.length > 0) {\n      addOutgoingMessage(msg)\n      onResponse(msg)\n    }\n  }\n\n  const handleKeyDown = (evt) => {\n    if (evt.key === 'Enter') {\n      onSendClicked()\n    }\n  }\n  const onChangeHandler = (event) => {\n    event.preventDefault()\n    setInputValue(event.currentTarget.value)\n  }\n\n  return (\n    <div className='row'>\n      <div className='col-11'>\n        <input\n          className={styles.sendInput}\n          type='text'\n          aria-label='send-data'\n          placeholder={inputPlaceHolder}\n          value={inputValue}\n          onChange={(evt) => onChangeHandler(evt)}\n          onKeyDown={(evt) => handleKeyDown(evt)}\n        />\n      </div>\n      <div className='col-1'>\n        <button\n          aria-label='submit-data'\n          className={styles.msg_send_btn}\n          onClick={(evt) => onSendClicked(evt)}\n          type='button'\n        >\n          <i className='fa fa-paper-plane' aria-hidden='true' />\n        </button>\n      </div>\n      {speechrecognition.enabled && (\n        <SpokenInputPanel\n          onClearInput={() => setInputValue('')}\n          onChangeTranscript={(txt) => setInputValue(txt)}\n          onSendData={(txt) => {\n            onDataReceivedAsSpeech(txt)\n          }}\n        />\n      )}\n    </div>\n    //\n    // <div className={styles.type_msg}>\n    //   <div className={styles.send_panel}>\n    //     <input\n    //       className={styles.write_msg}\n    //       type='text'\n    //       aria-label='send-data'\n    //       placeholder='Type a message'\n    //       value={inputValue}\n    //       onChange={(evt) => onChangeHandler(evt)}\n    //       onKeyDown={(evt) => handleKeyDown(evt)}\n    //     />\n    //     <button\n    //       aria-label='submit-data'\n    //       className={styles.msg_send_btn}\n    //       onClick={(evt) => onSendClicked(evt)}\n    //       type='button'\n    //     >\n    //       <i className='fa fa-paper-plane' aria-hidden='true' />\n    //     </button>\n    //   </div>\n    //   {speechrecognition.enabled && (\n    //     <SpokenInputPanel\n    //       onClearInput={() => setInputValue('')}\n    //       onChangeTranscript={(txt) => setInputValue(txt)}\n    //     />\n    //   )}\n    // </div>\n  )\n}\n","function timeSince(date) {\n  const seconds = Math.floor((new Date() - date) / 1000)\n\n  let interval = seconds / 3600\n  if (interval > 1) {\n    return Math.floor(interval) + ' hours ago'\n  }\n  interval = seconds / 60\n  if (interval > 1) {\n    return Math.floor(interval) + ' minutes ago'\n  }\n  return 'Just now'\n}\n\nfunction getStartOfDay(input) {\n  const dateToBeCompared = new Date(input.getTime())\n  dateToBeCompared.setHours(0)\n  dateToBeCompared.setMinutes(0)\n  dateToBeCompared.setSeconds(0)\n  dateToBeCompared.setMilliseconds(0)\n  return dateToBeCompared\n}\n\nexport function getDisplayDate(compDate) {\n  const months = new Array(\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec'\n  )\n  const days = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat')\n  const today = getStartOfDay(new Date())\n  const dateToBeCompared = getStartOfDay(compDate)\n\n  const diff = today.getTime() - dateToBeCompared.getTime() // get the difference between today(at 00:00:00) and the date\n  if (dateToBeCompared.getTime() == today.getTime()) {\n    return 'Today'\n  } else if (diff <= 24 * 60 * 60 * 1000) {\n    return 'Yesterday'\n  } else {\n    return (\n      days[dateToBeCompared.getDay()] +\n      ' ' +\n      dateToBeCompared.getDate() +\n      ' ' +\n      months[dateToBeCompared.getMonth()] +\n      ' ' +\n      dateToBeCompared.getFullYear()\n    )\n  }\n}\n\nfunction formattedTime(time) {\n  return time.toLocaleTimeString([], {\n    hour12: true,\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nexport function formattedDateTime(compDate) {\n  return formattedTime(compDate) + '    |    ' + getDisplayDate(compDate)\n}\n","import React from 'react'\nimport { formattedDateTime } from '../shared/formatter'\nimport styles from '../../styles.module.css'\n\nexport function IncomingMessage(props) {\n  return (\n    <div className='row w-100'>\n      <div className='col-1'>\n        <img src={props.imageUrl} className={styles.botImageClass} alt='Bot' />\n      </div>\n      <div className={'col-11 pull-left ' + styles.received_withd_msg}>\n        <p>{props.message}</p>\n        <span className={styles.time_date}>\n          {' '}\n          {formattedDateTime(props.time)}{' '}\n        </span>\n      </div>\n    </div>\n    //\n    // <div className={styles.incoming_msg}>\n    //   <div className={styles.incoming_msg_img}>\n    //\n    //   </div>\n    //   <div className={styles.incoming_msg_text}>\n    //     <div className={styles.received_withd_msg}>\n    //       <p>{props.message}</p>\n    //       <span className={styles.time_date}>\n    //         {' '}\n    //         {formattedDateTime(props.time)}{' '}\n    //       </span>\n    //     </div>\n    //   </div>\n    // </div>\n  )\n}\n\nexport function OutGoingMessage(props) {\n  return (\n    <div className={styles.outgoing_msg}>\n      <div className={styles.sent_msg}>\n        <p>{props.message}</p>\n        <span className={styles.time_date}>\n          {' '}\n          {formattedDateTime(props.time)}\n        </span>\n      </div>\n    </div>\n  )\n}\n","import { useGlobalState } from '../config'\nimport React, { useEffect, useRef } from 'react'\nimport { IncomingMessage, OutGoingMessage } from './components/MessagePanels'\nimport styles from '../styles.module.css'\n\nexport function MessageContainer() {\n  const bottomRef = useRef(null)\n  const [messages] = useGlobalState('messages')\n  const [config] = useGlobalState('config')\n\n  useEffect(() => {\n    if (bottomRef.current && bottomRef.current.scrollIntoView)\n      bottomRef.current.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n  // 50vw\n  return (\n    <div className={styles.msg_history}>\n      {messages.map((message, index) => {\n        if (message.type === 'incoming') {\n          return (\n            <IncomingMessage\n              imageUrl={config.botImageUrl}\n              message={message.message}\n              time={message.time}\n              key={index}\n            />\n          )\n        } else {\n          return (\n            <OutGoingMessage\n              message={message.message}\n              time={message.time}\n              key={index}\n            />\n          )\n        }\n      })}\n      <div ref={bottomRef} />\n    </div>\n  )\n}\n","export function TextToSpeechService() {\n  this.utterance = null\n  this.onEnd = (evt) => {}\n  this.onStart = (evt) => {}\n  this.onError = (evt) => {}\n}\n\nfunction getSpeechSynthesisUtterance(textToSpeech) {\n  return new window.SpeechSynthesisUtterance(textToSpeech)\n}\n\nTextToSpeechService.prototype.speak = function (textToSpeech) {\n  this.utterance = getSpeechSynthesisUtterance(textToSpeech)\n  this.utterance.addEventListener('end', (evt) => this.onEnd(evt))\n  this.utterance.addEventListener('start', (evt) => this.onStart(evt))\n  this.utterance.addEventListener('error', (evt) => this.onError(evt))\n  getSpeechSynthesis().speak(this.utterance)\n}\nTextToSpeechService.prototype.getVoices = function () {\n  return getSpeechSynthesis()\n    .getVoices()\n    .map((voice) => {\n      const defaultSuffix = voice.default ? '-Default' : ''\n      const label = `${voice.name} (${voice.lang}) ${defaultSuffix}`\n      return {\n        name: voice.name,\n        lang: voice.lang,\n        label\n      }\n    })\n}\n\nfunction getSpeechSynthesis() {\n  return window.speechSynthesis\n}\n\nTextToSpeechService.prototype.stop = function () {\n  this.onEnd('STOPPED')\n  if (getSpeechSynthesis().speaking) getSpeechSynthesis().cancel()\n}\n","import { getGlobalState, setGlobalState } from '../config'\n\nfunction setTextToSpeechEnabled(enabled) {\n  setGlobalState('texttospeech', (prev) => {\n    return {\n      ...prev,\n      enabled: enabled\n    }\n  })\n}\n\nexport function enableTextToSpeech() {\n  setTextToSpeechEnabled(true)\n}\n\nexport function disableTextToSpeech() {\n  setTextToSpeechEnabled(false)\n}\nexport function isTextToSpeechEnabled() {\n  return getGlobalState('texttospeech').enabled\n}\n\nexport function updateTextToSpeechStatus(status) {\n  setGlobalState('texttospeech', (prev) => {\n    return {\n      ...prev,\n      status: status\n    }\n  })\n}\n\nexport function setSpeaking(isSpeaking) {\n  setGlobalState('texttospeech', (prev) => {\n    return {\n      ...prev,\n      speaking: isSpeaking\n    }\n  })\n}\n","import React, { useEffect, useState } from 'react'\n\nimport { speak } from './textToSpeechController'\nimport {\n  disableTextToSpeech,\n  enableTextToSpeech\n} from './textToSpeechDispatcher'\nimport { useGlobalState } from '../config'\n\nexport function TextToSpeechDisabledPanel() {\n  // eslint-disable-next-line no-unused-vars\n  const [_, setLastReceivedMessage] = useGlobalState('lastreceivedmessage')\n\n  return (\n    <button\n      type='button'\n      className='btn btn-secondary'\n      aria-label='start-speech'\n      onClick={() => {\n        setLastReceivedMessage('')\n        enableTextToSpeech()\n      }}\n      title='Click to Enable Speech'\n    >\n      {' '}\n      <i className='fa-solid fa-volume-xmark' />\n    </button>\n  )\n}\nexport function TextToSpeechEnabledPanel() {\n  const [lastreceivedmessage] = useGlobalState('lastreceivedmessage')\n\n  useEffect(() => {\n    const handler = speak(lastreceivedmessage)\n    return () => {\n      handler.cancel()\n    }\n  }, [lastreceivedmessage])\n\n  return (\n    <button\n      type='button'\n      className='btn btn-primary'\n      aria-label='stop-speech'\n      onClick={() => disableTextToSpeech()}\n      title='Click to Disable Speech'\n    >\n      <i className='fa-solid fa-volume-high' />\n    </button>\n  )\n}\n\nexport function TextToSpeech() {\n  const [texttospeech] = useGlobalState('texttospeech')\n  const [enableSpeech, setEnableSpeech] = useState(false)\n\n  useEffect(() => {\n    setEnableSpeech(texttospeech.enabled)\n  }, [texttospeech])\n\n  return (\n    <span className='me-3'>\n      {enableSpeech ? (\n        <TextToSpeechEnabledPanel />\n      ) : (\n        <TextToSpeechDisabledPanel />\n      )}\n    </span>\n  )\n}\n","import { TextToSpeechService } from './textToSpeechService'\nimport { setSpeaking, updateTextToSpeechStatus } from './textToSpeechDispatcher'\n\nexport function speak(textToSpeech) {\n  const textToSpeechService = new TextToSpeechService()\n\n  textToSpeechService.onStart = (s) => {\n    setSpeaking(true)\n    updateTextToSpeechStatus('STARTED')\n  }\n  textToSpeechService.onEnd = (s) => {\n    setSpeaking(false)\n    updateTextToSpeechStatus('END')\n  }\n  textToSpeechService.onError = (evt) => {\n    setSpeaking(false)\n    updateTextToSpeechStatus('ERROR')\n    // showErrorNotification(evt.error)\n  }\n  if (textToSpeech) {\n    textToSpeechService.speak(textToSpeech)\n  }\n  return {\n    cancel: () => {\n      textToSpeechService.stop()\n    }\n  }\n}\n","import {\n  AppInitialState,\n  getGlobalSpeakRecognitionState,\n  setGlobalState\n} from '../config'\n\n/**\n * updateSpeechrecognition should update global state\n * @param inp\n * @returns {void}\n * @Example\n * updateSpeechRecognition({status: \"LISTENING\",transcript: \"sample\"} );\n * updateSpeechRecognition({transcript: \"sample\"} );\n *\n */\nexport function updateSpeechRecognition(inp) {\n  setGlobalState('speechrecognition', (prev) => {\n    return {\n      ...prev,\n      ...inp\n    }\n  })\n}\n\nexport function setSpeechRecognitionError(error) {\n  updateSpeechRecognition({\n    status: 'ERROR',\n    error: error,\n    enabled: false,\n    pauseRecognizing: false\n  })\n}\nexport function updateSpeechRecognitionStatus(status) {\n  updateSpeechRecognition({ status })\n}\n\nexport function isSpeechRecognitionStatusEquals(status) {\n  return getGlobalSpeakRecognitionState().status === status\n}\n\nexport function setInterimSpeech(transcript) {\n  updateSpeechRecognition({ transcript, status: 'LISTENING' })\n}\n\nexport function resetSpeechRecognition() {\n  updateSpeechRecognition(AppInitialState.speechrecognition)\n}\n","export function SpeechRecognitionService() {\n  this.status = 'NONE'\n  this.error = null\n  this.paused = false\n  this.stopped = false\n  this.transcript = ''\n  this.onStart = () => {}\n  this.onEnd = () => {}\n  this.onNoMatch = () => {}\n  this.onSpeechStart = () => {}\n  this.onSpeechEnd = () => {}\n  this.onError = () => {}\n  this.onResult = () => {}\n}\n\n// Invalid speechend  and end events => restart recognition\n//\n// On Chat Response received\n// if enabled\n// stop recognition and resume on after outgoing message\n// stop recognition and resume on speak end\n\n// state of mike\n// enabled\n// disabled\n// enabled-cannot-listen\n\nfunction getWebkitSpeechRecognition() {\n  return new window.webkitSpeechRecognition()\n}\n\nSpeechRecognitionService.prototype.start = function () {\n  this.recognition = getWebkitSpeechRecognition()\n  this.recognition.onstart = this.onStart.bind(this)\n  this.recognition.onend = (evt) => {\n    if (this.paused == false && this.stopped == false && this.error == null)\n      this.onEnd(evt)\n  }\n  this.recognition.onerror = (inp) => {\n    const validErrors = inp.error === 'aborted' || inp.error === 'no-speech'\n    if (this.paused == false && this.stopped == false && !validErrors) {\n      this.onError(inp)\n      this.error = inp.error\n    }\n  }\n  this.recognition.onnomatch = this.onNoMatch.bind(this)\n  this.recognition.onspeechstart = this.onSpeechStart.bind(this)\n  this.recognition.onspeechend = this.onSpeechEnd.bind(this)\n  this.recognition.onresult = (evt) => {\n    this.transcript = evt.results[0][0].transcript\n    this.onResult(this.transcript)\n  }\n\n  this.recognition.continuous = false\n  this.recognition.interimResults = true\n  this.recognition.lang = 'en-US'\n\n  this.recognition.start()\n}\n\nSpeechRecognitionService.prototype.abort = function () {\n  if (this.recognition) this.recognition.abort()\n}\n\nSpeechRecognitionService.prototype.pause = function () {\n  this.paused = true\n  if (this.recognition) this.recognition.abort()\n}\n\nSpeechRecognitionService.prototype.stop = function () {\n  this.stopped = true\n  if (this.recognition) this.recognition.abort()\n}\n","import { SpeechRecognitionService } from './speechRecognitionService'\n\nimport {\n  isSpeechRecognitionStatusEquals,\n  resetSpeechRecognition,\n  setInterimSpeech,\n  setSpeechRecognitionError,\n  updateSpeechRecognition,\n  updateSpeechRecognitionStatus\n} from './speechRecognitionDispatcher'\nimport { getGlobalSpeakRecognitionState } from '../config'\n\nlet speechRecognitionService = null\n\nexport function startSpeechRecognition() {\n  speechRecognitionService = new SpeechRecognitionService()\n\n  speechRecognitionService.onStart = (event) => {\n    // console.log('onStart', event)\n    updateSpeechRecognitionStatus('READY')\n  }\n  speechRecognitionService.onSpeechStart = (event) => {\n    // console.log('onSpeechStart', event)\n    updateSpeechRecognitionStatus('SPEECH-STARTED')\n  }\n\n  speechRecognitionService.onError = (inp) => {\n    console.log('onError', inp)\n    setSpeechRecognitionError(inp.error)\n  }\n  speechRecognitionService.onResult = (data) => {\n    // console.log('onResult', data)\n    if (data) setInterimSpeech(data)\n  }\n  speechRecognitionService.onSpeechEnd = (data) => {\n    // console.log('onSpeechEnd', data)\n    if (speechRecognitionService.transcript)\n      updateSpeechRecognitionStatus('SPEECH-COMPLETED')\n  }\n\n  speechRecognitionService.onEnd = (data) => {\n    // On end ends recognition , we need to restart it if there is no Error\n    const canRestart =\n      !isSpeechRecognitionStatusEquals('ERROR') &&\n      getGlobalSpeakRecognitionState().enabled\n    if (canRestart) {\n      updateSpeechRecognitionStatus('RESTART')\n    }\n  }\n  updateSpeechRecognition({\n    enabled: true,\n    pauseRecognizing: false,\n    status: 'INITIALIZED'\n  })\n\n  speechRecognitionService.start()\n}\n\nexport function stopSpeechRecognition() {\n  if (speechRecognitionService) {\n    speechRecognitionService.stop()\n  }\n}\n","import React, { useEffect, useState } from 'react'\nimport { useGlobalState } from '../config'\n\nimport { updateSpeechRecognition } from './speechRecognitionDispatcher'\nimport {\n  startSpeechRecognition,\n  stopSpeechRecognition\n} from './speechRecognitionController'\n\nexport function useRestartSpeechRecognizer() {\n  const [speechrecognition] = useGlobalState('speechrecognition')\n\n  const [restart, setRestart] = useState(0)\n  useEffect(() => {\n    setTimeout(() => {\n      if (speechrecognition.status === 'RESTART' && speechrecognition.enabled) {\n        // console.log('restart speechrecognition valid')\n        setRestart(restart + 1)\n      }\n    }, 100)\n  }, [speechrecognition])\n\n  return [restart]\n}\n\nexport function SpeechRecognizerEnabledPanel() {\n  const [canRestart] = useRestartSpeechRecognizer()\n\n  function onStopSpeechRecognition() {\n    // Update State\n    updateSpeechRecognition({ enabled: false })\n    stopSpeechRecognition()\n  }\n\n  useEffect(() => {\n    startSpeechRecognition()\n\n    return () => {\n      stopSpeechRecognition()\n    }\n  }, [canRestart])\n\n  return (\n    <button\n      type='button'\n      className='btn btn-success'\n      aria-label='stop-listening'\n      onClick={() => onStopSpeechRecognition()}\n      title='Click to Disable Speech'\n    >\n      <i className='fa-solid fa-microphone' />\n    </button>\n  )\n}\n\nexport function SpeechRecognizer() {\n  const [speechrecognition] = useGlobalState('speechrecognition')\n  const [speechrecognitionEnabled, setSpeechRecognitionEnabled] =\n    useState(false)\n\n  useEffect(() => {\n    setSpeechRecognitionEnabled(speechrecognition.enabled)\n  }, [speechrecognition])\n\n  // On Error\n\n  if (speechrecognitionEnabled) return <SpeechRecognizerEnabledPanel />\n  else\n    return (\n      <span>\n        <button\n          type='button'\n          className='btn btn-secondary'\n          aria-label='start-listening'\n          onClick={() => updateSpeechRecognition({ enabled: true })}\n          title='Click to Enable Speech'\n        >\n          {' '}\n          <i className='fa-solid fa-microphone-slash' />\n        </button>\n      </span>\n    )\n}\n","import { TextToSpeech } from './texttospeech/TextToSpeech'\nimport { SpeechRecognizer } from './speechrecognition/SpeechRecognizer'\nimport React, { useEffect, useState } from 'react'\nimport { useGlobalState } from './config'\nimport styles from './styles.module.css'\n\nexport function useSpeechData() {\n  const [speechrecognition] = useGlobalState('speechrecognition')\n  const [texttospeech] = useGlobalState('texttospeech')\n  const [canSpeechRecognize, setCanSpeechRecognize] = useState(true)\n\n  useEffect(() => {\n    const canPauseRecognizing =\n      texttospeech.enabled && speechrecognition.enabled && texttospeech.speaking\n    setCanSpeechRecognize(!canPauseRecognizing)\n  }, [speechrecognition, texttospeech])\n\n  return [canSpeechRecognize]\n}\n\nexport function SpeechRecognizerAndTTSPanel() {\n  const [canSpeechRecognize] = useSpeechData()\n\n  return (\n    <div className={styles.speechcontainer}>\n      <TextToSpeech />\n      {canSpeechRecognize && <SpeechRecognizer />}\n    </div>\n  )\n}\n","import React, { useEffect } from 'react'\n\nimport styles from './styles.module.css'\nimport { InputPanel } from './message/components/InputPanel'\nimport { MessageContainer } from './message/MessageContainer'\nimport { SpeechRecognizerAndTTSPanel } from './SpeechRecognizerAndTTSPanel'\n\nimport { useGlobalState } from './config'\nimport { addIncomingMessage } from './message/messageService'\n// ChatBotComponent\n\n// Options\n/*\n{\n  speechRecognition: true,\n  textToSpeech: true,\n  textBox: true,\n  textBoxPlaceholder: 'Type your message here',\n  sendButton:{\n    text: 'Send',\n    className: 'send-button'\n  },\n  textBox:{\n    className: 'text-box'\n  }\n\n\n  textBoxSubmitButtonClassName: 'chatbot__submit-button',\n\n\n\n}\n\n */\n\nexport const ChatBotComponent = ({ handleMessage, options }) => {\n  const [config, setConfig] = useGlobalState('config')\n\n  const [textToSpeechOptions, setTextToSpeechOptions] =\n    useGlobalState('texttospeech')\n  const [speechrecognitionOptions, setSpeechrecognitionOptions] =\n    useGlobalState('speechrecognition')\n\n  // speechrecognition.enabled\n\n  const callBackendAPI = async (text) => {\n    if (handleMessage) {\n      const response = await handleMessage({ data: text })\n      addIncomingMessage(response.text)\n    } else {\n      const response = await Promise.resolve({ text: 'echoing ' + text })\n      addIncomingMessage(response.text)\n    }\n\n    // now add the response to incoming messages\n  }\n\n  useEffect(() => {\n    const mergedOptions = { ...config, ...options }\n    const formattedOptions = {\n      ...mergedOptions,\n      textToSpeech: String(mergedOptions.textToSpeech) === 'true',\n      speechRecognition: String(mergedOptions.speechRecognition) === 'true'\n    }\n\n    setConfig(formattedOptions)\n\n    setTextToSpeechOptions({\n      ...textToSpeechOptions,\n      enabled: formattedOptions.textToSpeech\n    })\n    setSpeechrecognitionOptions({\n      ...speechrecognitionOptions,\n      enabled: formattedOptions.speechRecognition\n    })\n  }, [options])\n\n  return (\n    <div className={styles.appcontainer}>\n      <SpeechRecognizerAndTTSPanel />\n      <div className={styles.messageDiv}>\n        <MessageContainer className={styles.messageContainer} />\n      </div>\n      <InputPanel onResponse={callBackendAPI} />\n    </div>\n  )\n}\n","import React, {useEffect,useRef,useState} from 'react'\nimport {useFormik} from \"formik\";\nimport { ChatBotComponent } from 'react-chatbot-with-text-and-speech'\n import 'react-chatbot-with-text-and-speech/dist/index.css'\n\nconst ChatBotWithWebsocket = () => {\n\n\n  /*\nImplementation ws://127.0.0.1:5000/bot\n\n> Log will appear here\n> Connecting to: ws://127.0.0.1:5000/bot\n> Connection established\n> SENT: hi\n> RECEIVED: Hello\n\n\n   */\n\n\n  const [webSocketOpened, setWebSocketOpened] = React.useState(false);\n  const ws = useRef(null);\n  useEffect(() => {\n    ws.current = new WebSocket(\"ws://127.0.0.1:5000/bot\");\n    ws.current.onopen = () => setWebSocketOpened(true);\n    ws.current.onclose = () =>  setWebSocketOpened(false);\n\n    const wsCurrent = ws.current;\n\n    return () => {\n      wsCurrent.close();\n    };\n  }, []);\n\n\n\n  const handleMessage = (message) => {\n    if(!webSocketOpened){\n      console.log('Socket not open')\n    }\n\n    return new Promise((resolve, reject) => {\n      ws.current.addEventListener('message', (event) => {\n        console.log('Received message from server',event.data)\n        resolve({ text: event.data})\n        ws.current.onMessage = null;\n      });\n      ws.current.send(message.data)\n    });\n\n  };\n\n\n  const options = {\n    botImageUrl: \"https://upload.wikimedia.org/wikipedia/commons/1/19/Boss-icon.png\",\n    speechRecognition: false,\n    textToSpeech: true,\n    inputBoxPlaceholder: 'Your Text Here',\n\n  }\n\n\n  return <ChatBotComponent options={options} handleMessage={handleMessage} />\n}\nconst ChatBotWithHttp = () => {\n\n  /*\n  result of http://localhost:5000/api/answer?question=hi\n\n  {\"result\":\"How are you doing?\"}\n\n\n   */\n\n  const handleMessage = async (message) => {\n    try {\n      const result = await fetch('http://localhost:5000/api/answer?question=' + message.data);\n      const json = await result.json();\n      return {text: json.result}\n\n    } catch (e) {\n      console.log(e)\n      // handle error\n    }\n\n  };\n\n\n  const options = {\n    botImageUrl: \"https://upload.wikimedia.org/wikipedia/commons/1/19/Boss-icon.png\",\n    speechRecognition: false,\n    textToSpeech: true,\n    inputBoxPlaceholder: 'Your Text Here',\n\n  }\n\n\n  return <ChatBotComponent options={options} handleMessage={handleMessage} />\n}\nconst ChatBotWithStatic = () => {\n  const options = {\n    botImageUrl: \"https://upload.wikimedia.org/wikipedia/commons/1/19/Boss-icon.png\",\n    speechRecognition: false,\n    textToSpeech: true,\n    inputBoxPlaceholder: 'Your Text Here',\n\n  }\n  const handleMessage = (message) => {\n    return { text: 'echo  ' + message.data }\n  }\n  return <ChatBotComponent options={options} handleMessage={handleMessage} />\n}\n\n\nconst ChatBotWithDemo = () => {\n\n\n  const defaultOptions = {\n    botImageUrl: \"https://upload.wikimedia.org/wikipedia/commons/1/19/Boss-icon.png\",\n    speechRecognition: false,\n    textToSpeech: true,\n    inputBoxPlaceholder: 'Your Text Here',\n    url:\"\",\n  }\n\n  const availableOptions = {\n    botImageUrl: \"Image URL\",\n    speechRecognition:\"true or false\",\n    textToSpeech:\"true or false\",\n    inputBoxPlaceholder:\"Any string\",\n    url:\"Enter URL for getting chat response.\",\n  }\n  const [options, setOptions] = useState(defaultOptions);\n\n  const formik = useFormik({\n    initialValues: {\n      ...defaultOptions\n    },\n    onSubmit: values => {\n      setOptions(values)\n    },\n  });\n\n\n  const handleMessage = async (message) => {\n    if (options.url && options.url.length > 0) {\n      const result = await fetch(options.url + '?question=' + message.data);\n      const json = await result.json();\n      return {text: json.result}\n    }else{\n      return {text: 'echo ' + message.data}\n    }\n\n  }\n  return (\n      <div className=\"container-fluid\">\n        <h2> Talking and Listening ChatBot Demo</h2>\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <ChatBotComponent options={options} handleMessage={handleMessage} />\n          </div>\n          <div className=\"col-6\">\n            <h3> Change values to see in action</h3>\n            <form onSubmit={formik.handleSubmit}>\n\n              {Object.keys(defaultOptions).map((key) => (\n                <div className=\"form-group\" key={\"div\" + key}>\n                  <label htmlFor={key}>{key}</label>\n                  <input className=\"form-control\" id={key} name={key} type=\"text\" onChange={formik.handleChange} value={formik.values[key]} />\n                  <small id={key + \"Help\"} className=\"form-text text-muted\">{availableOptions[key]}</small>\n                </div>\n              ))}\n\n              <br/><small> chat response will pass {\"{YOUR_API_URL}?question=CHAT_BOT_QUESTION\"}</small>\n              <br/> <small> example http://localhost:5000/api/answer </small>\n              <br/><small> response should be {\"{result:YOUR_ANSWER}\"} ,</small>\n              <br/><small> if not provided , it will echo the same</small>\n              <br/>\n              <br/>\n              <br/>\n              <button type=\"submit\">Submit</button>\n\n            </form>\n          </div>\n\n        </div>\n      </div>\n    )\n\n\n}\n\nconst App = () => {\n\n\n\n  return <>\n    {/*<h2>Http</h2>*/}\n    {/*<ChatBotWithHttp/>*/}\n    {/*<h2>Websocket</h2>*/}\n    {/*<ChatBotWithWebsocket/>*/}\n    {/*<h2> Static</h2>*/}\n    {/*<ChatBotWithStatic/>*/}\n\n    <ChatBotWithDemo/>\n    </>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}